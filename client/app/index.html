<!doctype html>
<html data-ng-app="GLClient" data-ng-keydown="keypress($event)" data-ng-strict-di lang="{{GLTranslate.indirect.appLanguage}}">
  <head>
    <title data-ng-bind="pt"></title>
    <meta charset="utf-8" />
    <meta name="description" content="" data-ng-attr-content="{{node.description}}" />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta name="referrer" content="never" />

    <!-- Ticket #1480 : Specify the ordered IE support starting from EDGE and ending with 11 -->
    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,11" />

    <!-- build:css css/styles.css -->
    <link rel="stylesheet" href="css/bootstrap.css" />
    <link rel="stylesheet" href="css/select.min.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/admin.css" />
    <link rel="stylesheet" href="css/home.css" />
    <link rel="stylesheet" href="css/submission.css" />
    <link rel="stylesheet" href="css/tip.css" />
    <!-- endbuild -->

    <link id="favicon" rel="shortcut icon" href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=" type="image/x-icon" />

    <link data-ng-if="::node.css" rel="stylesheet" data-ng-href="data:text/css;base64,{{node.css}}" />
  </head>

  <body>
    <style type="text/css">
      .block-user-input {
        pointer-events: none;
        user-select: none;
      }

      #BrowserNotSupported {
        display: none;
        padding: 30px;
      }

      #PageOverlay {
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        display: flex;
        align-items: center;
        text-align: center;
        z-index: 2147483647;
        pointer-events: none;
        user-select: none;
      }

      #LoaderBox {
        position: relative;
        margin: 0 auto;
        padding: 2em;
        display: flex;
        align-items: center;
        font-size: 2em;
        font-family: "Helvetica Neue", Helvetica,Arial, sans-serif;
        color: #555;
        background-color: #FFF;
        border: 0.1em solid #EEE;
        border-radius: 0.7em;
        -moz-border-radius: 0.7em;
        -webkit-border-radius: 0.7em;
      }

      #LoaderBoxContent {
        margin: 0 auto;
      }

      .gly-spin {
        -webkit-animation: gly-spin 2s infinite linear;
        animation: gly-spin 2s infinite linear;
      }

      @-webkit-keyframes gly-spin {
        0% {
          -webkit-transform: rotate(0deg);
          transform: rotate(0deg);
        }
        100% {
          -webkit-transform: rotate(359deg);
          transform: rotate(359deg);
        }
      }

      @keyframes gly-spin {
        0% {
          -webkit-transform: rotate(0deg);
          transform: rotate(0deg);
        }
        100% {
          -webkit-transform: rotate(359deg);
          transform: rotate(359deg);
        }
      }

      [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
        display: none !important;
      }
    </style>

    <noscript>
      <h1>Error! :(</h1>
      <br /><br />
      <p>
        Your browser is not running Javascript that is required to
        use the whistleblowing client.<br /><br />

        It's common believe that Javascript and security don't sound
        well together, for this reason we suggest to use the Tor Browser,
        an extremely tuned FireFox browser with Tor integrated.

        Here you can download the latest release of the
        <a href="https://www.torproject.org/download/download-easy.html.en">Tor Browser</a>.
      </p>
    </noscript>

    <div id="BrowserNotSupported">
      <div>
        <h1>[EN] Warning! :(</h1><br /><br />
        <div>
          You are running an unsupported and potentially vulnerable browser.<br /><br />
          You are strongly advised to download and install the Tor Browser.<br/>
          The Tor Browser includes various privacy and security enhancements not present in other browsers.<br /><br />
          <a href="https://www.torproject.org/download/download-easy.html.en" target="_blank" rel="noreferrer noopener" class="text-center">[ Download the Tor Browser ]</a><br /><br />
          This is the list of the other supported browsers:<br />
          <ul>
            <li>Mozilla Firefox &gt;= 34</li>
            <li>Google Chrome &gt;= 37</li>
            <li>Safari: &gt;= 7.1</li>
            <li>Edge: &gt;= 12</li>
            <li>Internet Explorer &gt;= 11</li>
          </ul>
        </div>
      </div>
      <br /><br />
      <div>
        <h1>[IT] Attenzione! :(</h1><br /><br />
        <div>
          Il browser in uso non è supportato ed è potenzialmente vulnerabile.<br /><br />
          Si invita caldamente a scaricare ed installare il Tor Browser.<br />
          Il Tor Browser include varie migliorie alla privacy a alla sicurezza non presenti in altri browser.<br /><br />
          <a href="https://www.torproject.org/download/download-easy.html.en" target="_blank" rel="noreferrer noopener" class="text-center">[ Download the Tor Browser ]</a><br /><br />
          La  seguente è la lista degli altri browser supportati:<br />
          <ul>
            <li>Mozilla Firefox &gt;= 34</li>
            <li>Google Chrome &gt;= 37</li>
            <li>Safari: &gt;= 7.1</li>
            <li>Edge: &gt;= 12</li>
            <li>Internet Explorer &gt;= 11</li>
          </ul>
        </div>
      </div>
    </div>

    <div id="BrowserSupported" class="ng-cloak" data-ng-class="{'block-user-input': showLoadingPanel}">
      <div data-ng-if="started">
        <div id="BodyDefault" data-ng-class="Utils.classExtension()">
          <div id="PrivacyBadgeBox" data-ng-if="Utils.showPrivacyBadge()" data-ng-include="'views/partials/privacybadge.html'"></div>
          <div id="HeaderBox" data-ng-if="!embedded" data-ng-include="'views/partials/header.html'"></div>
          <div id="MessagesConsoleBox" data-ng-include="'views/partials/messageconsole.html'"></div>
           <div id="ContentBox" class="container-fluid">
            <a id="top"></a>
            <div data-ng-view=""></div>
          </div>
           <div id="FooterBox" data-ng-if="!embedded" data-ng-include="'views/partials/footer.html'"></div>
        </div>

        <div id="BodyCustom" data-ng-if="Utils.isHomepage() && node.homepage" data-ng-class="Utils.classExtension()" data-ng-controller="HomeCtrl">
          <div data-ng-include="'custom_homepage.html'"></div>
        </div>
      </div>

      <div id="PageOverlay" data-ng-hide="started && !showLoadingPanel">
        <div id="LoaderBox">
          <div id="LoaderBoxContent">
            <div class="glyphicon glyphicon-cog gly-spin"></div>
            <div data-translate>Loading</div>
          </div>
        </div>
      </div>
    </div>

    <!-- build:js js/scripts.js -->
    <script src="js/lib/stacktrace.min.js"></script>
    <script src="js/lib/scrypt-async.min.js"></script>
    <script src="js/lib/openpgp.min.js"></script>
    <script src="js/lib/angular.min.js"></script>
    <script src="js/lib/angular-aria.min.js"></script>
    <script src="js/lib/angular-filter.min.js"></script>
    <script src="js/lib/angular-resource.min.js"></script>
    <script src="js/lib/angular-route.min.js"></script>
    <script src="js/lib/angular-sanitize.min.js"></script>
    <script src="js/lib/angular-translate.min.js"></script>
    <script src="js/lib/angular-translate-loader-url.min.js"></script>
    <script src="js/lib/angular-translate-loader-static-files.min.js"></script>
    <script src="js/lib/ui-bootstrap-tpls.js"></script>
    <script src="js/lib/d3.min.js"></script>
    <script src="js/lib/FileSaver.js"></script>
    <script src="js/lib/angular-file-saver.min.js"></script>
    <script src="js/lib/flow.min.js"></script>
    <script src="js/lib/ng-flow.min.js"></script>
    <script src="js/lib/zxcvbn.js"></script>
    <script src="js/lib/angular-zxcvbn.js"></script>
    <script src="js/lib/tmhDynamicLocale.min.js"></script>
    <script src="js/lib/select.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/services.js"></script>
    <script src="js/directives.js"></script>
    <script src="js/filters.js"></script>
    <script src="js/templates.js"></script>
    <script src="js/crypto/main.js"></script>
    <script src="js/controllers/main.js"></script>
    <script src="js/controllers/preferences.js"></script>
    <script src="js/controllers/fileupload.js"></script>
    <script src="js/controllers/signup.js"></script>
    <script src="js/controllers/wizard.js"></script>
    <script src="js/controllers/home.js"></script>
    <script src="js/controllers/receiver.js"></script>
    <script src="js/controllers/tip.js"></script>
    <script src="js/controllers/custodian.js"></script>
    <script src="js/controllers/admin/main.js"></script>
    <script src="js/controllers/admin/users.js"></script>
    <script src="js/controllers/admin/receivers.js"></script>
    <script src="js/controllers/admin/contexts.js"></script>
    <script src="js/controllers/admin/fields.js"></script>
    <script src="js/controllers/admin/steps.js"></script>
    <script src="js/controllers/admin/questionnaires.js"></script>
    <script src="js/controllers/admin/overview.js"></script>
    <script src="js/controllers/admin/network.js"></script>
    <script src="js/controllers/admin/stats.js"></script>
    <script src="js/controllers/admin/tenant.js"></script>
    <script src="js/controllers/submission.js"></script>
    <script src="js/controllers/receipt.js"></script>
    <script src="js/controllers/login.js"></script>
    <script src="js/controllers/user.js"></script>
    <!-- endbuild -->

    <script type="text/javascript">
      if(!window.console) { window.console={}; window.console.log = function(){}; }

      var isBrowserCompatible = function() {
        var crawlers = [
          "Googlebot",
          "Bingbot",
          "Slurp",
          "DuckDuckBot",
          "Baiduspider",
          "YandexBot",
          "Sogou",
          "Exabot",
          "ia_archiver"
        ];

        for (var i=0; i < crawlers.length; crawlers++) {
          if (navigator.userAgent.indexOf(crawlers[i]) !== -1) {
            return true;
          }
        }

        if (typeof window === 'undefined') {
          return false;
        }

        if (!(window.File && window.FileList && window.FileReader)) {
          console.log("GlobaLeaks startup failure: missing support for File API");
          return false;
        }

        if (typeof Blob === 'undefined' ||
            (!Blob.prototype.slice && !Blob.prototype.webkitSlice && !!Blob.prototype.mozSlice)) {
          console.log("GlobaLeaks startup failure: missing support for Blob API");
          return false;
        }

        // Checks related to Webworker compatibility
        if (typeof window.Worker === 'undefined') {
          console.log("GlobaLeaks startup failure: missing Webworker support");
          return false;
        }

        if (location.protocol === 'https:' || location.host.match(/^[a-z0-9]{16}\.onion$/)) {
          /* Due to https://github.com/globaleaks/GlobaLeaks/issues/2088 the proof of work if currently
             implemented only over Tor and HTTPS that are the production conditions. */

          if (!(window.crypto && (window.crypto.subtle || window.crypto.webkitSubtle) && window.crypto.getRandomValues) &&
              !(typeof window.msCrypto === 'object' && typeof window.msCrypto.getRandomValues === 'function')) {
            console.log("GlobaLeaks startup failure: missing end-2-end encryption requirements");
            return false;
          }
        }

        return true;
      };

      function loadjsfile(filepath) {
       var fileref = document.createElement('script');
       fileref.setAttribute("type", "text/javascript");
       fileref.setAttribute("src", filepath);
       if (typeof fileref != "undefined") {
         document.getElementsByTagName("head")[0].appendChild(fileref);
       }
      }

      function start_globaleaks() {
        if (isBrowserCompatible()) {
          loadjsfile("js/scripts.js");
        } else {
          document.getElementById("BrowserSupported").style.display = "none";
          document.getElementById("BrowserNotSupported").style.display = "block";
        }
      }
      <!-- start_globaleaks(); -->
    </script>

    <script data-ng-if="Utils.attachCustomJS()" data-ng-src="{{Utils.base64ToTrustedScriptUrl(node.script)}}"></script>
  </body>
</html>
